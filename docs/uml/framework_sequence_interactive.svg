<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="3978px" preserveAspectRatio="none" style="width:2538px;height:3978px;" version="1.1" viewBox="0 0 2538 3978" width="2538px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="36" lengthAdjust="spacingAndGlyphs" textLength="1394" x="574" y="54.8047">Verde trial sequence diagram (click green participant boxes to navigate to code)</text><rect fill="#FFFFFF" height="3590.6445" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="88" y="250.6172"/><rect fill="#FFFFFF" height="3532.0234" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="422" y="309.2383"/><rect fill="#FFFFFF" height="60" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="576" y="426.4805"/><rect fill="#FFFFFF" height="3217.5391" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="576" y="545.1016"/><rect fill="#FFFFFF" height="79.9316" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="906" y="1303.1074"/><rect fill="#FFFFFF" height="190.4844" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1133" y="911.4492"/><rect fill="#FFFFFF" height="139.9316" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1133" y="1807.3867"/><rect fill="#FFFFFF" height="196.4844" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1133" y="2195.7344"/><rect fill="#FFFFFF" height="58.6211" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1133" y="2927.1875"/><rect fill="#FFFFFF" height="197.8633" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1133" y="3060.4297"/><rect fill="#FFFFFF" height="60" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1306" y="1887.3184"/><rect fill="#FFFFFF" height="70.6211" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1306" y="2321.5977"/><rect fill="#FFFFFF" height="58.6211" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1306" y="2927.1875"/><rect fill="#FFFFFF" height="70.6211" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1306" y="3187.6719"/><rect fill="#FFFFFF" height="95.2422" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1440" y="1006.6914"/><rect fill="#FFFFFF" height="972.5586" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1581" y="1504.2813"/><rect fill="#FFFFFF" height="724.832" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1581" y="2618.082"/><rect fill="#FFFFFF" height="284.4844" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1581" y="3478.1563"/><rect fill="#FFFFFF" height="155.2422" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1987" y="3607.3984"/><rect fill="#FFFFFF" height="1003.1797" style="stroke: #000000; stroke-width: 4.0;" width="2490" x="26" y="173.375"/><rect fill="#FFFFFF" height="194.4844" style="stroke: #000000; stroke-width: 4.0;" width="2043" x="473" y="1204.5547"/><rect fill="#FFFFFF" height="1079.8008" style="stroke: #000000; stroke-width: 4.0;" width="2043" x="473" y="1427.0391"/><rect fill="#FFFFFF" height="838.0742" style="stroke: #000000; stroke-width: 4.0;" width="2043" x="473" y="2534.8398"/><rect fill="#FFFFFF" height="462.3477" style="stroke: #000000; stroke-width: 4.0;" width="2490" x="26" y="3400.9141"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="98" x2="98" y1="139.375" y2="3897.2617"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="431" x2="431" y1="139.375" y2="3897.2617"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="585" x2="585" y1="139.375" y2="3897.2617"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="915" x2="915" y1="139.375" y2="3897.2617"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1143" x2="1143" y1="139.375" y2="3897.2617"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1315" x2="1315" y1="139.375" y2="3897.2617"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1449" x2="1449" y1="139.375" y2="3897.2617"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1591" x2="1591" y1="139.375" y2="3897.2617"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1997" x2="1997" y1="139.375" y2="3897.2617"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="2452" x2="2452" y1="139.375" y2="3897.2617"/><a href="https://github.com/trubens71/verde/blob/master/scripts/verde.py" target="_top" title="https://github.com/trubens71/verde/blob/master/scripts/verde.py" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/master/scripts/verde.py" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/master/scripts/verde.py" xlink:type="simple"><rect fill="#F0FFF0" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="104" x="46" y="76.3984"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="76" x="60" y="117.4688">verde</text><rect fill="#F0FFF0" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="104" x="46" y="3895.2617"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="76" x="60" y="3936.332">verde</text></a><a href="https://github.com/trubens71/verde/blob/master/src/trial.py" target="_top" title="https://github.com/trubens71/verde/blob/master/src/trial.py" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/master/src/trial.py" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/master/src/trial.py" xlink:type="simple"><rect fill="#F0FFF0" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="82" x="391" y="76.3984"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="54" x="405" y="117.4688">trial</text><rect fill="#F0FFF0" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="82" x="391" y="3895.2617"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="54" x="405" y="3936.332">trial</text></a><a href="https://github.com/trubens71/verde/blob/master/src/experiment.py" target="_top" title="https://github.com/trubens71/verde/blob/master/src/experiment.py" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/master/src/experiment.py" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/master/src/experiment.py" xlink:type="simple"><rect fill="#F0FFF0" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="186" x="493" y="76.3984"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="158" x="507" y="117.4688">experiment</text><rect fill="#F0FFF0" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="186" x="493" y="3895.2617"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="158" x="507" y="3936.332">experiment</text></a><a href="https://github.com/trubens71/verde/blob/master/src/domain_rules.py" target="_top" title="https://github.com/trubens71/verde/blob/master/src/domain_rules.py" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/master/src/domain_rules.py" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/master/src/domain_rules.py" xlink:type="simple"><rect fill="#F0FFF0" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="214" x="809" y="76.3984"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="186" x="823" y="117.4688">domain_rules</text><rect fill="#F0FFF0" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="214" x="809" y="3895.2617"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="186" x="823" y="3936.332">domain_rules</text></a><a href="https://github.com/trubens71/verde/blob/master/src/draco_proxy.py" target="_top" title="https://github.com/trubens71/verde/blob/master/src/draco_proxy.py" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/master/src/draco_proxy.py" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/master/src/draco_proxy.py" xlink:type="simple"><rect fill="#F0FFF0" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="200" x="1043" y="76.3984"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="172" x="1057" y="117.4688">draco_proxy</text><rect fill="#F0FFF0" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="200" x="1043" y="3895.2617"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="172" x="1057" y="3936.332">draco_proxy</text></a><a href="https://github.com/uwdata/draco" target="_top" title="https://github.com/uwdata/draco" xlink:actuate="onRequest" xlink:href="https://github.com/uwdata/draco" xlink:show="new" xlink:title="https://github.com/uwdata/draco" xlink:type="simple"><rect fill="#F8F8FF" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="106" x="1263" y="76.3984"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="78" x="1277" y="117.4688">draco</text><rect fill="#F8F8FF" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="106" x="1263" y="3895.2617"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="78" x="1277" y="3936.332">draco</text></a><a href="https://github.com/uwdata/dziban" target="_top" title="https://github.com/uwdata/dziban" xlink:actuate="onRequest" xlink:href="https://github.com/uwdata/dziban" xlink:show="new" xlink:title="https://github.com/uwdata/dziban" xlink:type="simple"><rect fill="#F8F8FF" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="122" x="1389" y="76.3984"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="94" x="1403" y="117.4688">dziban</text><rect fill="#F8F8FF" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="122" x="1389" y="3895.2617"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="94" x="1403" y="3936.332">dziban</text></a><a href="https://github.com/trubens71/verde/blob/master/src/results.py" target="_top" title="https://github.com/trubens71/verde/blob/master/src/results.py" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/master/src/results.py" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/master/src/results.py" xlink:type="simple"><rect fill="#F0FFF0" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="120" x="1531" y="76.3984"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="92" x="1545" y="117.4688">results</text><rect fill="#F0FFF0" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="120" x="1531" y="3895.2617"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="92" x="1545" y="3936.332">results</text></a><a href="https://github.com/trubens71/verde/blob/master/src/compare.py" target="_top" title="https://github.com/trubens71/verde/blob/master/src/compare.py" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/master/src/compare.py" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/master/src/compare.py" xlink:type="simple"><rect fill="#F0FFF0" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="148" x="1923" y="76.3984"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="120" x="1937" y="117.4688">compare</text><rect fill="#F0FFF0" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="148" x="1923" y="3895.2617"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="120" x="1937" y="3936.332">compare</text></a><a href="https://github.com/trubens71/verde/blob/master/src/utils.py" target="_top" title="https://github.com/trubens71/verde/blob/master/src/utils.py" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/master/src/utils.py" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/master/src/utils.py" xlink:type="simple"><rect fill="#F0FFF0" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="86" x="2410" y="76.3984"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="58" x="2424" y="117.4688">utils</text><rect fill="#F0FFF0" height="60.9766" style="stroke: #808080; stroke-width: 3.0;" width="86" x="2410" y="3895.2617"/><text fill="#000000" font-family="sans-serif" font-size="28" lengthAdjust="spacingAndGlyphs" textLength="58" x="2424" y="3936.332">utils</text></a><rect fill="#FFFFFF" height="3590.6445" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="88" y="250.6172"/><rect fill="#FFFFFF" height="3532.0234" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="422" y="309.2383"/><rect fill="#FFFFFF" height="60" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="576" y="426.4805"/><rect fill="#FFFFFF" height="3217.5391" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="576" y="545.1016"/><rect fill="#FFFFFF" height="79.9316" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="906" y="1303.1074"/><rect fill="#FFFFFF" height="190.4844" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1133" y="911.4492"/><rect fill="#FFFFFF" height="139.9316" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1133" y="1807.3867"/><rect fill="#FFFFFF" height="196.4844" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1133" y="2195.7344"/><rect fill="#FFFFFF" height="58.6211" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1133" y="2927.1875"/><rect fill="#FFFFFF" height="197.8633" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1133" y="3060.4297"/><rect fill="#FFFFFF" height="60" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1306" y="1887.3184"/><rect fill="#FFFFFF" height="70.6211" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1306" y="2321.5977"/><rect fill="#FFFFFF" height="58.6211" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1306" y="2927.1875"/><rect fill="#FFFFFF" height="70.6211" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1306" y="3187.6719"/><rect fill="#FFFFFF" height="95.2422" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1440" y="1006.6914"/><rect fill="#FFFFFF" height="972.5586" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1581" y="1504.2813"/><rect fill="#FFFFFF" height="724.832" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1581" y="2618.082"/><rect fill="#FFFFFF" height="284.4844" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1581" y="3478.1563"/><rect fill="#FFFFFF" height="155.2422" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="1987" y="3607.3984"/><path d="M26,173.375 L200,173.375 L200,187.375 L180,207.375 L26,207.375 L26,173.375 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 2.0;"/><rect fill="none" height="1003.1797" style="stroke: #000000; stroke-width: 4.0;" width="2490" x="26" y="173.375"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="56" y="200.5117">set up</text><a href="https://github.com/trubens71/verde/blob/e3e62bc0e99533f67f17d23f406d6f08fca4a210/src/utils.py#L186" target="_top" title="https://github.com/trubens71/verde/blob/e3e62bc0e99533f67f17d23f406d6f08fca4a210/src/utils.py#L186" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/e3e62bc0e99533f67f17d23f406d6f08fca4a210/src/utils.py#L186" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/e3e62bc0e99533f67f17d23f406d6f08fca4a210/src/utils.py#L186" xlink:type="simple"><polygon fill="#A80036" points="2429,242.6172,2449,250.6172,2429,258.6172,2437,250.6172" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="108" x2="2441" y1="250.6172" y2="250.6172"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="214" x="122" y="241.1328">configure_logger</text></a><polygon fill="#A80036" points="398,301.2383,418,309.2383,398,317.2383,406,309.2383" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="108" x2="410" y1="309.2383" y2="309.2383"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="92" x="122" y="299.7539">init(dir)</text><polygon fill="#A80036" points="2429,359.8594,2449,367.8594,2429,375.8594,2437,367.8594" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="442" x2="2441" y1="367.8594" y2="367.8594"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="656" x="456" y="358.375">validate_json_doc(trial_config, trial_config_schema)</text><polygon fill="#A80036" points="552,418.4805,572,426.4805,552,434.4805,560,426.4805" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="442" x2="564" y1="426.4805" y2="426.4805"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="42" x="456" y="416.9961">init</text><polygon fill="#A80036" points="552,537.1016,572,545.1016,552,553.1016,560,545.1016" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="108" x2="564" y1="545.1016" y2="545.1016"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="42" x="122" y="535.6172">run</text><polygon fill="#A80036" points="2429,595.7227,2449,603.7227,2429,611.7227,2437,603.7227" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="596" x2="2441" y1="603.7227" y2="603.7227"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="222" x="610" y="594.2383">delete_temp_files</text><polygon fill="#A80036" points="2429,654.3438,2449,662.3438,2429,670.3438,2437,662.3438" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="596" x2="2441" y1="662.3438" y2="662.3438"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="708" x="610" y="652.8594">validate_json_doc(domain_schema,verde_meta_schema)</text><polygon fill="#A80036" points="2429,712.9648,2449,720.9648,2429,728.9648,2437,720.9648" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="596" x2="2441" y1="720.9648" y2="720.9648"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="634" x="610" y="711.4805">validate_json_doc(mapping_file,mapping_schema)</text><polygon fill="#A80036" points="2429,808.207,2449,816.207,2429,824.207,2437,816.207" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="596" x2="2441" y1="816.207" y2="816.207"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="462" x="610" y="806.7227">fix_column_headings(input_csv_file)</text><path d="M222,746.9648 L222,856.9648 L566,856.9648 L566,766.9648 L546,746.9648 L222,746.9648 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M546,746.9648 L546,766.9648 L566,766.9648 L546,746.9648 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="302" x="234" y="782.1016">clingo does not support</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="252" x="234" y="812.7227">special chars, so fix</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="222" x="234" y="843.3438">our vis input data</text><polygon fill="#A80036" points="1109,903.4492,1129,911.4492,1109,919.4492,1117,911.4492" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="596" x2="1121" y1="911.4492" y2="911.4492"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="390" x="610" y="901.9648">get_baseline_schema_query_lp</text><polygon fill="#A80036" points="1416,998.6914,1436,1006.6914,1416,1014.6914,1424,1006.6914" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1153" x2="1428" y1="1006.6914" y2="1006.6914"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="68" x="1167" y="997.207">Chart</text><path d="M1470,937.4492 L1470,1047.4492 L2102,1047.4492 L2102,957.4492 L2082,937.4492 L1470,937.4492 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M2082,937.4492 L2082,957.4492 L2102,957.4492 L2082,937.4492 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="590" x="1482" y="972.5859">use dziban to create logic program facts which</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="570" x="1482" y="1003.207">describe the vis input data structues, and the</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="488" x="1482" y="1033.8281">rules to express the query on that data</text><polygon fill="#A80036" points="1426,1093.9336,1446,1101.9336,1426,1109.9336,1434,1101.9336" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1143" x2="1438" y1="1101.9336" y2="1101.9336"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="194" x="1157" y="1092.4492">_get_full_query</text><polygon fill="#A80036" points="2429,1152.5547,2449,1160.5547,2429,1168.5547,2437,1160.5547" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="596" x2="2441" y1="1160.5547" y2="1160.5547"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="524" x="610" y="1151.0703">write_list_to_file(baseline_schema_query)</text><path d="M473,1204.5547 L1067,1204.5547 L1067,1218.5547 L1047,1238.5547 L473,1238.5547 L473,1204.5547 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 2.0;"/><rect fill="none" height="194.4844" style="stroke: #000000; stroke-width: 4.0;" width="2043" x="473" y="1204.5547"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="504" x="503" y="1231.6914">generate verde domain specific rules</text><polygon fill="#A80036" points="882,1295.1074,902,1303.1074,882,1311.1074,890,1303.1074" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="596" x2="894" y1="1303.1074" y2="1303.1074"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="272" x="610" y="1293.623">create_verde_rules_lp</text><path d="M936,1249.1758 L936,1329.1758 L1422,1329.1758 L1422,1269.1758 L1402,1249.1758 L936,1249.1758 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1402,1249.1758 L1402,1269.1758 L1422,1269.1758 L1402,1249.1758 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="444" x="948" y="1284.3125">rule implementations are described</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="212" x="948" y="1314.9336">in later diagrams</text><polygon fill="#A80036" points="2429,1375.0391,2449,1383.0391,2429,1391.0391,2437,1383.0391" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="916" x2="2441" y1="1383.0391" y2="1383.0391"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="564" x="930" y="1373.5547">write_list_to_file(verde_schema_rules_query)</text><path d="M473,1427.0391 L1005,1427.0391 L1005,1441.0391 L985,1461.0391 L473,1461.0391 L473,1427.0391 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 2.0;"/><rect fill="none" height="1079.8008" style="stroke: #000000; stroke-width: 4.0;" width="2043" x="473" y="1427.0391"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="442" x="503" y="1454.1758">get baseline draco visualisations</text><polygon fill="#A80036" points="1557,1496.2813,1577,1504.2813,1557,1512.2813,1565,1504.2813" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="596" x2="1569" y1="1504.2813" y2="1504.2813"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="542" x="610" y="1494.7969">get_vis_results(baseline_schema_query_lp)</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1601" x2="1685" y1="1571.2129" y2="1571.2129"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1685" x2="1685" y1="1571.2129" y2="1597.2129"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1603" x2="1685" y1="1597.2129" y2="1597.2129"/><polygon fill="#A80036" points="1623,1589.2129,1603,1597.2129,1623,1605.2129,1615,1597.2129" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="146" x="1615" y="1561.7285">get_lp_files</text><path d="M1784,1530.2813 L1784,1610.2813 L2376,1610.2813 L2376,1550.2813 L2356,1530.2813 L1784,1530.2813 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M2356,1530.2813 L2356,1550.2813 L2376,1550.2813 L2356,1530.2813 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="550" x="1796" y="1565.418">draco knowledge base (lp's) of visualisation</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="464" x="1796" y="1596.0391">hard and soft rules and their weights</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1601" x2="1685" y1="1664.1445" y2="1664.1445"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1685" x2="1685" y1="1664.1445" y2="1690.1445"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1603" x2="1685" y1="1690.1445" y2="1690.1445"/><polygon fill="#A80036" points="1623,1682.1445,1603,1690.1445,1623,1698.1445,1615,1690.1445" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="156" x="1615" y="1654.6602">write_full_lp</text><polygon fill="#A80036" points="2429,1740.7656,2449,1748.7656,2429,1756.7656,2437,1748.7656" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1601" x2="2441" y1="1748.7656" y2="1748.7656"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="424" x="1615" y="1739.2813">write_list_to_file(baseline_full_lp)</text><polygon fill="#A80036" points="1175,1799.3867,1155,1807.3867,1175,1815.3867,1167,1807.3867" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1163" x2="1579" y1="1807.3867" y2="1807.3867"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="126" x="1187" y="1797.9023">run_draco</text><polygon fill="#A80036" points="1282,1879.3184,1302,1887.3184,1282,1895.3184,1290,1887.3184" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1153" x2="1294" y1="1887.3184" y2="1887.3184"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="42" x="1167" y="1877.834">run</text><path d="M1336,1833.3867 L1336,1913.3867 L1786,1913.3867 L1786,1853.3867 L1766,1833.3867 L1336,1833.3867 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1766,1833.3867 L1766,1853.3867 L1786,1853.3867 L1766,1833.3867 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="408" x="1348" y="1868.5234">passes lp to clingo and captures</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="316" x="1348" y="1899.1445">output as python objects</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1601" x2="1685" y1="2035.5605" y2="2035.5605"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1685" x2="1685" y1="2035.5605" y2="2061.5605"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1603" x2="1685" y1="2061.5605" y2="2061.5605"/><polygon fill="#A80036" points="1623,2053.5605,1603,2061.5605,1623,2069.5605,1615,2061.5605" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="230" x="1615" y="2026.0762">write_results_json</text><path d="M1868,1994.6289 L1868,2074.6289 L2432,2074.6289 L2432,2014.6289 L2412,1994.6289 L1868,1994.6289 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M2412,1994.6289 L2412,2014.6289 L2432,2014.6289 L2412,1994.6289 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="522" x="1880" y="2029.7656">contains all ranked models, vis proprties,</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="292" x="1880" y="2060.3867">and soft rule violations</text><polygon fill="#A80036" points="1175,2187.7344,1155,2195.7344,1175,2203.7344,1167,2195.7344" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1163" x2="1579" y1="2195.7344" y2="2195.7344"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="238" x="1187" y="2186.25">get_vega_lite_spec</text><path d="M636,2095.8711 L636,2267.8711 L1122,2267.8711 L1122,2115.8711 L1102,2095.8711 L636,2095.8711 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1102,2095.8711 L1102,2115.8711 L1122,2115.8711 L1102,2095.8711 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="396" x="648" y="2131.0078">use draco to turn vis properties</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="350" x="648" y="2161.6289">into a valid vega-lite specs,</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="402" x="648" y="2192.25">however we have to take care of</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="444" x="648" y="2222.8711">new properties introduced by verde</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="348" x="656" y="2253.4922">(sort, colours and schemes)</text><polygon fill="#A80036" points="1282,2313.5977,1302,2321.5977,1282,2329.5977,1290,2321.5977" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1153" x2="1294" y1="2321.5977" y2="2321.5977"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="64" x="1167" y="2312.1133">as_vl</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1326" x2="1410" y1="2390.2188" y2="2390.2188"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1410" x2="1410" y1="2390.2188" y2="2416.2188"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1316" x2="1410" y1="2416.2188" y2="2416.2188"/><polygon fill="#A80036" points="1336,2408.2188,1316,2416.2188,1336,2424.2188,1328,2416.2188" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="82" x="1340" y="2380.7344">asp2vl</text><path d="M1446,2354.5977 L1446,2404.5977 L1610,2404.5977 L1610,2374.5977 L1590,2354.5977 L1446,2354.5977 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1590,2354.5977 L1590,2374.5977 L1610,2374.5977 L1590,2354.5977 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="122" x="1458" y="2389.7344">javascript</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1601" x2="1685" y1="2474.8398" y2="2474.8398"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1685" x2="1685" y1="2474.8398" y2="2500.8398"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1591" x2="1685" y1="2500.8398" y2="2500.8398"/><polygon fill="#A80036" points="1611,2492.8398,1591,2500.8398,1611,2508.8398,1603,2500.8398" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="274" x="1615" y="2465.3555">write_results_vegalite</text><path d="M473,2534.8398 L1379,2534.8398 L1379,2548.8398 L1359,2568.8398 L473,2568.8398 L473,2534.8398 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 2.0;"/><rect fill="none" height="838.0742" style="stroke: #000000; stroke-width: 4.0;" width="2043" x="473" y="2534.8398"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="816" x="503" y="2561.9766">get verde enhanced visualisations (similar pattern to above)</text><polygon fill="#A80036" points="1557,2610.082,1577,2618.082,1557,2626.082,1565,2618.082" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="596" x2="1569" y1="2618.082" y2="2618.082"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="582" x="610" y="2608.5977">get_vis_results(verde_schema_rules_query_lp)</text><path d="M1610,2579.4609 L1610,2629.4609 L2120,2629.4609 L2120,2599.4609 L2100,2579.4609 L1610,2579.4609 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M2100,2579.4609 L2100,2599.4609 L2120,2599.4609 L2100,2579.4609 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="468" x="1622" y="2614.5977">now with verde domain specific rules</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1601" x2="1685" y1="2691.0137" y2="2691.0137"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1685" x2="1685" y1="2691.0137" y2="2717.0137"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1603" x2="1685" y1="2717.0137" y2="2717.0137"/><polygon fill="#A80036" points="1623,2709.0137,1603,2717.0137,1623,2725.0137,1615,2717.0137" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="294" x="1615" y="2681.5293">get_overridden_lp_files</text><path d="M1932,2650.082 L1932,2730.082 L2306,2730.082 L2306,2670.082 L2286,2650.082 L1932,2650.082 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M2286,2650.082 L2286,2670.082 L2306,2670.082 L2286,2650.082 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="268" x="1944" y="2685.2188">verde overrides some</text><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="332" x="1944" y="2715.8398">draco baseline constraints</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1601" x2="1685" y1="2783.9453" y2="2783.9453"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1685" x2="1685" y1="2783.9453" y2="2809.9453"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1603" x2="1685" y1="2809.9453" y2="2809.9453"/><polygon fill="#A80036" points="1623,2801.9453,1603,2809.9453,1623,2817.9453,1615,2809.9453" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="156" x="1615" y="2774.4609">write_full_lp</text><polygon fill="#A80036" points="2429,2860.5664,2449,2868.5664,2429,2876.5664,2437,2868.5664" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1601" x2="2441" y1="2868.5664" y2="2868.5664"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="388" x="1615" y="2859.082">write_list_to_file(verde_full_lp)</text><polygon fill="#A80036" points="1175,2919.1875,1155,2927.1875,1175,2935.1875,1167,2927.1875" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1163" x2="1579" y1="2927.1875" y2="2927.1875"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="126" x="1187" y="2917.7031">run_draco</text><polygon fill="#A80036" points="1292,2977.8086,1312,2985.8086,1292,2993.8086,1300,2985.8086" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1143" x2="1304" y1="2985.8086" y2="2985.8086"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="42" x="1157" y="2976.3242">run</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1601" x2="1695" y1="3034.4297" y2="3034.4297"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1695" x2="1695" y1="3034.4297" y2="3060.4297"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1613" x2="1695" y1="3060.4297" y2="3060.4297"/><polygon fill="#A80036" points="1633,3052.4297,1613,3060.4297,1633,3068.4297,1625,3060.4297" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="230" x="1625" y="3024.9453">write_results_json</text><polygon fill="#A80036" points="1175,3121.0508,1155,3129.0508,1175,3137.0508,1167,3129.0508" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1163" x2="1579" y1="3129.0508" y2="3129.0508"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="238" x="1187" y="3119.5664">get_vega_lite_spec</text><polygon fill="#A80036" points="1282,3179.6719,1302,3187.6719,1282,3195.6719,1290,3187.6719" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1153" x2="1294" y1="3187.6719" y2="3187.6719"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="64" x="1167" y="3178.1875">as_vl</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1326" x2="1410" y1="3256.293" y2="3256.293"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1410" x2="1410" y1="3256.293" y2="3282.293"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1316" x2="1410" y1="3282.293" y2="3282.293"/><polygon fill="#A80036" points="1336,3274.293,1316,3282.293,1336,3290.293,1328,3282.293" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="82" x="1340" y="3246.8086">asp2vl</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1601" x2="1685" y1="3340.9141" y2="3340.9141"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1685" x2="1685" y1="3340.9141" y2="3366.9141"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1591" x2="1685" y1="3366.9141" y2="3366.9141"/><polygon fill="#A80036" points="1611,3358.9141,1591,3366.9141,1611,3374.9141,1603,3366.9141" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="274" x="1615" y="3331.4297">write_results_vegalite</text><path d="M26,3400.9141 L320,3400.9141 L320,3414.9141 L300,3434.9141 L26,3434.9141 L26,3400.9141 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 2.0;"/><rect fill="none" height="462.3477" style="stroke: #000000; stroke-width: 4.0;" width="2490" x="26" y="3400.9141"/><text fill="#000000" font-family="sans-serif" font-size="26" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="204" x="56" y="3428.0508">analyse results</text><polygon fill="#A80036" points="1557,3470.1563,1577,3478.1563,1557,3486.1563,1565,3478.1563" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="596" x2="1569" y1="3478.1563" y2="3478.1563"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="278" x="610" y="3468.6719">make_vegalite_concat</text><polygon fill="#A80036" points="2429,3534.7773,2449,3542.7773,2429,3550.7773,2437,3542.7773" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1601" x2="2441" y1="3542.7773" y2="3542.7773"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="662" x="1615" y="3533.293">validate_json_doc(vegalite_concat, vegalite_schema)</text><path d="M1096,3504.1563 L1096,3554.1563 L1570,3554.1563 L1570,3524.1563 L1550,3504.1563 L1096,3504.1563 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1550,3504.1563 L1550,3524.1563 L1570,3524.1563 L1550,3504.1563 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="432" x="1108" y="3539.293">confirm all visualisations are valid</text><polygon fill="#A80036" points="1963,3599.3984,1983,3607.3984,1963,3615.3984,1971,3607.3984" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1601" x2="1975" y1="3607.3984" y2="3607.3984"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="348" x="1615" y="3597.9141">compare_baseline_to_verde</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="2007" x2="2091" y1="3666.0195" y2="3666.0195"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2091" x2="2091" y1="3666.0195" y2="3692.0195"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2009" x2="2091" y1="3692.0195" y2="3692.0195"/><polygon fill="#A80036" points="2029,3684.0195,2009,3692.0195,2029,3700.0195,2021,3692.0195" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="194" x="2021" y="3656.5352">compare_specs</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="2007" x2="2091" y1="3760.6406" y2="3760.6406"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="2091" x2="2091" y1="3760.6406" y2="3786.6406"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1997" x2="2091" y1="3786.6406" y2="3786.6406"/><polygon fill="#A80036" points="2017,3778.6406,1997,3786.6406,2017,3794.6406,2009,3786.6406" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="408" x="2021" y="3751.1563">create_exploratory_visualisation</text><polygon fill="#A80036" points="408,3833.2617,428,3841.2617,408,3849.2617,416,3841.2617" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="98" x2="420" y1="3841.2617" y2="3841.2617"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="266" x="112" y="3831.7773">exec_regression_test</text><path d="M452,3802.6406 L452,3852.6406 L1066,3852.6406 L1066,3822.6406 L1046,3802.6406 L452,3802.6406 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1046,3802.6406 L1046,3822.6406 L1066,3822.6406 L1046,3802.6406 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="572" x="464" y="3837.7773">compare all output files to previous good run</text><!--MD5=[ce2d1f24ad82485aab090365cdac3cf2]
@startuml
skinparam shadowing false

skinparam ParticipantBorderColor gray

title Verde trial sequence diagram (click green participant boxes to navigate to code)

participant verde [[https://github.com/trubens71/verde/blob/master/scripts/verde.py]] #Honeydew
participant trial [[https://github.com/trubens71/verde/blob/master/src/trial.py]] #Honeydew
participant experiment [[https://github.com/trubens71/verde/blob/master/src/experiment.py]] #Honeydew
participant domain_rules [[https://github.com/trubens71/verde/blob/master/src/domain_rules.py]] #Honeydew
participant draco_proxy [[https://github.com/trubens71/verde/blob/master/src/draco_proxy.py]] #Honeydew
participant draco [[https://github.com/uwdata/draco]] #GhostWhite
participant dziban [[https://github.com/uwdata/dziban]] #GhostWhite
participant results [[https://github.com/trubens71/verde/blob/master/src/results.py]] #Honeydew
participant compare [[https://github.com/trubens71/verde/blob/master/src/compare.py]] #Honeydew
participant utils [[https://github.com/trubens71/verde/blob/master/src/utils.py]] #Honeydew

group set up
verde->utils [[https://github.com/trubens71/verde/blob/e3e62bc0e99533f67f17d23f406d6f08fca4a210/src/utils.py#L186]] : configure_logger
activate verde
verde->trial: init(dir)
activate trial
trial->utils: validate_json_doc(trial_config, trial_config_schema)
trial->experiment: init
activate experiment
deactivate experiment
verde->experiment: run
activate experiment
experiment->utils: delete_temp_files
experiment->utils: validate_json_doc(domain_schema,verde_meta_schema)
experiment->utils: validate_json_doc(mapping_file,mapping_schema)
experiment->utils: fix_column_headings(input_csv_file)
note left
clingo does not support
special chars, so fix
our vis input data
end note
experiment->draco_proxy: get_baseline_schema_query_lp
activate draco_proxy
draco_proxy->dziban: Chart
note right
use dziban to create logic program facts which
describe the vis input data structues, and the
rules to express the query on that data
endnote
activate dziban
draco_proxy->dziban: _get_full_query
deactivate dziban
deactivate draco_proxy
experiment->utils: write_list_to_file(baseline_schema_query)
end


group generate verde domain specific rules
experiment->domain_rules: create_verde_rules_lp
activate domain_rules
note right
rule implementations are described
in later diagrams
end note
domain_rules->utils: write_list_to_file(verde_schema_rules_query)
deactivate domain_rules
end

activate experiment

group get baseline draco visualisations
experiment->results: get_vis_results(baseline_schema_query_lp)
activate results
results->results: get_lp_files
note right
draco knowledge base (lp's) of visualisation
hard and soft rules and their weights
end note
results->results: write_full_lp
results->utils: write_list_to_file(baseline_full_lp)
results->draco_proxy: run_draco
activate draco_proxy
draco_proxy->draco: run
activate draco
note right
passes lp to clingo and captures
output as python objects
end note
deactivate draco
deactivate draco_proxy
results->results: write_results_json
note right
contains all ranked models, vis proprties,
and soft rule violations
end note
results->draco_proxy: get_vega_lite_spec
note left
use draco to turn vis properties
into a valid vega-lite specs,
however we have to take care of
new properties introduced by verde
 (sort, colours and schemes)
end note
activate draco_proxy
draco_proxy->draco: as_vl
activate draco
draco->draco: asp2vl
note right
javascript
end note
deactivate draco
deactivate draco_proxy
results->results: write_results_vegalite
deactivate results
end


group get verde enhanced visualisations (similar pattern to above)
experiment->results: get_vis_results(verde_schema_rules_query_lp)
activate results
note right: now with verde domain specific rules
results->results: get_overridden_lp_files
note right
verde overrides some
draco baseline constraints
end note
results->results: write_full_lp
results->utils: write_list_to_file(verde_full_lp)
results->draco_proxy: run_draco
activate draco_proxy
activate draco
draco_proxy->draco: run
deactivate draco
deactivate draco_proxy
results->results: write_results_json
activate draco_proxy
results->draco_proxy: get_vega_lite_spec
draco_proxy->draco: as_vl
activate draco
draco->draco: asp2vl
deactivate draco
deactivate draco_proxy
results->results: write_results_vegalite
deactivate results
end

group analyse results
experiment->results: make_vegalite_concat
activate results
results->utils: validate_json_doc(vegalite_concat, vegalite_schema)
note left
confirm all visualisations are valid
end note
results->compare: compare_baseline_to_verde
activate compare
compare->compare: compare_specs
compare->compare: create_exploratory_visualisation
deactivate compare
deactivate results
deactivate experiment
verde->trial: exec_regression_test
deactivate trial
note right: compare all output files to previous good run
deactivate verde
end

@enduml

PlantUML version 1.2020.09(Sun May 10 11:51:06 BST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10-b765.53
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>
