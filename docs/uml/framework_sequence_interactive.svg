<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1989px" preserveAspectRatio="none" style="width:1269px;height:1989px;" version="1.1" viewBox="0 0 1269 1989" width="1269px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="697" x="287" y="27.4023">Verde trial sequence diagram (click green participant boxes to navigate to code)</text><rect fill="#FFFFFF" height="1795.3223" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="44" y="125.3086"/><rect fill="#FFFFFF" height="1766.0117" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="211" y="154.6191"/><rect fill="#FFFFFF" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="288" y="213.2402"/><rect fill="#FFFFFF" height="1608.7695" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="288" y="272.5508"/><rect fill="#FFFFFF" height="39.9658" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453" y="651.5537"/><rect fill="#FFFFFF" height="95.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="566.5" y="455.7246"/><rect fill="#FFFFFF" height="69.9658" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="566.5" y="903.6934"/><rect fill="#FFFFFF" height="98.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="566.5" y="1097.8672"/><rect fill="#FFFFFF" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="566.5" y="1463.5938"/><rect fill="#FFFFFF" height="98.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="566.5" y="1530.2148"/><rect fill="#FFFFFF" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="653" y="943.6592"/><rect fill="#FFFFFF" height="35.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="653" y="1160.7988"/><rect fill="#FFFFFF" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="653" y="1463.5938"/><rect fill="#FFFFFF" height="35.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="653" y="1593.8359"/><rect fill="#FFFFFF" height="47.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="720" y="503.3457"/><rect fill="#FFFFFF" height="486.2793" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="790.5" y="752.1406"/><rect fill="#FFFFFF" height="362.416" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="790.5" y="1309.041"/><rect fill="#FFFFFF" height="142.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="790.5" y="1739.0781"/><rect fill="#FFFFFF" height="77.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="993.5" y="1803.6992"/><rect fill="#FFFFFF" height="501.5898" style="stroke: #000000; stroke-width: 2.0;" width="1245" x="13" y="86.6875"/><rect fill="#FFFFFF" height="97.2422" style="stroke: #000000; stroke-width: 2.0;" width="1021.5" x="236.5" y="602.2773"/><rect fill="#FFFFFF" height="539.9004" style="stroke: #000000; stroke-width: 2.0;" width="1021.5" x="236.5" y="713.5195"/><rect fill="#FFFFFF" height="419.0371" style="stroke: #000000; stroke-width: 2.0;" width="1021.5" x="236.5" y="1267.4199"/><rect fill="#FFFFFF" height="231.1738" style="stroke: #000000; stroke-width: 2.0;" width="1245" x="13" y="1700.457"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="49" x2="49" y1="69.6875" y2="1948.6309"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="215.5" x2="215.5" y1="69.6875" y2="1948.6309"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="292.5" x2="292.5" y1="69.6875" y2="1948.6309"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="457.5" x2="457.5" y1="69.6875" y2="1948.6309"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="571.5" x2="571.5" y1="69.6875" y2="1948.6309"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="657.5" x2="657.5" y1="69.6875" y2="1948.6309"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="724.5" x2="724.5" y1="69.6875" y2="1948.6309"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="795.5" x2="795.5" y1="69.6875" y2="1948.6309"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="998.5" x2="998.5" y1="69.6875" y2="1948.6309"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1226" x2="1226" y1="69.6875" y2="1948.6309"/><a href="https://github.com/trubens71/verde/blob/master/scripts/verde.py" target="_top" title="https://github.com/trubens71/verde/blob/master/scripts/verde.py" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/master/scripts/verde.py" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/master/scripts/verde.py" xlink:type="simple"><rect fill="#F0FFF0" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="52" x="23" y="38.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="30" y="58.7344">verde</text><rect fill="#F0FFF0" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="52" x="23" y="1947.6309"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="30" y="1968.166">verde</text></a><a href="https://github.com/trubens71/verde/blob/master/src/trial.py" target="_top" title="https://github.com/trubens71/verde/blob/master/src/trial.py" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/master/src/trial.py" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/master/src/trial.py" xlink:type="simple"><rect fill="#F0FFF0" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="41" x="195.5" y="38.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="202.5" y="58.7344">trial</text><rect fill="#F0FFF0" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="41" x="195.5" y="1947.6309"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="202.5" y="1968.166">trial</text></a><a href="https://github.com/trubens71/verde/blob/master/src/experiment.py" target="_top" title="https://github.com/trubens71/verde/blob/master/src/experiment.py" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/master/src/experiment.py" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/master/src/experiment.py" xlink:type="simple"><rect fill="#F0FFF0" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="93" x="246.5" y="38.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="253.5" y="58.7344">experiment</text><rect fill="#F0FFF0" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="93" x="246.5" y="1947.6309"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="253.5" y="1968.166">experiment</text></a><a href="https://github.com/trubens71/verde/blob/master/src/domain_rules.py" target="_top" title="https://github.com/trubens71/verde/blob/master/src/domain_rules.py" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/master/src/domain_rules.py" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/master/src/domain_rules.py" xlink:type="simple"><rect fill="#F0FFF0" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="107" x="404.5" y="38.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="411.5" y="58.7344">domain_rules</text><rect fill="#F0FFF0" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="107" x="404.5" y="1947.6309"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="411.5" y="1968.166">domain_rules</text></a><a href="https://github.com/trubens71/verde/blob/master/src/draco_proxy.py" target="_top" title="https://github.com/trubens71/verde/blob/master/src/draco_proxy.py" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/master/src/draco_proxy.py" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/master/src/draco_proxy.py" xlink:type="simple"><rect fill="#F0FFF0" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="100" x="521.5" y="38.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="528.5" y="58.7344">draco_proxy</text><rect fill="#F0FFF0" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="100" x="521.5" y="1947.6309"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="528.5" y="1968.166">draco_proxy</text></a><a href="https://github.com/uwdata/draco" target="_top" title="https://github.com/uwdata/draco" xlink:actuate="onRequest" xlink:href="https://github.com/uwdata/draco" xlink:show="new" xlink:title="https://github.com/uwdata/draco" xlink:type="simple"><rect fill="#F8F8FF" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="53" x="631.5" y="38.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="638.5" y="58.7344">draco</text><rect fill="#F8F8FF" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="53" x="631.5" y="1947.6309"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="638.5" y="1968.166">draco</text></a><a href="https://github.com/uwdata/dziban" target="_top" title="https://github.com/uwdata/dziban" xlink:actuate="onRequest" xlink:href="https://github.com/uwdata/dziban" xlink:show="new" xlink:title="https://github.com/uwdata/dziban" xlink:type="simple"><rect fill="#F8F8FF" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="61" x="694.5" y="38.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="701.5" y="58.7344">dziban</text><rect fill="#F8F8FF" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="61" x="694.5" y="1947.6309"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="701.5" y="1968.166">dziban</text></a><a href="https://github.com/trubens71/verde/blob/master/src/results.py" target="_top" title="https://github.com/trubens71/verde/blob/master/src/results.py" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/master/src/results.py" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/master/src/results.py" xlink:type="simple"><rect fill="#F0FFF0" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="60" x="765.5" y="38.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="772.5" y="58.7344">results</text><rect fill="#F0FFF0" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="60" x="765.5" y="1947.6309"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="772.5" y="1968.166">results</text></a><a href="https://github.com/trubens71/verde/blob/master/src/compare.py" target="_top" title="https://github.com/trubens71/verde/blob/master/src/compare.py" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/master/src/compare.py" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/master/src/compare.py" xlink:type="simple"><rect fill="#F0FFF0" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="74" x="961.5" y="38.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="968.5" y="58.7344">compare</text><rect fill="#F0FFF0" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="74" x="961.5" y="1947.6309"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="968.5" y="1968.166">compare</text></a><a href="https://github.com/trubens71/verde/blob/master/src/utils.py" target="_top" title="https://github.com/trubens71/verde/blob/master/src/utils.py" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/master/src/utils.py" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/master/src/utils.py" xlink:type="simple"><rect fill="#F0FFF0" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="43" x="1205" y="38.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="1212" y="58.7344">utils</text><rect fill="#F0FFF0" height="30.4883" style="stroke: #808080; stroke-width: 1.5;" width="43" x="1205" y="1947.6309"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="1212" y="1968.166">utils</text></a><rect fill="#FFFFFF" height="1795.3223" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="44" y="125.3086"/><rect fill="#FFFFFF" height="1766.0117" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="211" y="154.6191"/><rect fill="#FFFFFF" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="288" y="213.2402"/><rect fill="#FFFFFF" height="1608.7695" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="288" y="272.5508"/><rect fill="#FFFFFF" height="39.9658" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453" y="651.5537"/><rect fill="#FFFFFF" height="95.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="566.5" y="455.7246"/><rect fill="#FFFFFF" height="69.9658" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="566.5" y="903.6934"/><rect fill="#FFFFFF" height="98.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="566.5" y="1097.8672"/><rect fill="#FFFFFF" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="566.5" y="1463.5938"/><rect fill="#FFFFFF" height="98.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="566.5" y="1530.2148"/><rect fill="#FFFFFF" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="653" y="943.6592"/><rect fill="#FFFFFF" height="35.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="653" y="1160.7988"/><rect fill="#FFFFFF" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="653" y="1463.5938"/><rect fill="#FFFFFF" height="35.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="653" y="1593.8359"/><rect fill="#FFFFFF" height="47.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="720" y="503.3457"/><rect fill="#FFFFFF" height="486.2793" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="790.5" y="752.1406"/><rect fill="#FFFFFF" height="362.416" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="790.5" y="1309.041"/><rect fill="#FFFFFF" height="142.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="790.5" y="1739.0781"/><rect fill="#FFFFFF" height="77.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="993.5" y="1803.6992"/><path d="M13,86.6875 L100,86.6875 L100,93.6875 L90,103.6875 L13,103.6875 L13,86.6875 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="501.5898" style="stroke: #000000; stroke-width: 2.0;" width="1245" x="13" y="86.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="28" y="100.2559">set up</text><a href="https://github.com/trubens71/verde/blob/e3e62bc0e99533f67f17d23f406d6f08fca4a210/src/utils.py#L186" target="_top" title="https://github.com/trubens71/verde/blob/e3e62bc0e99533f67f17d23f406d6f08fca4a210/src/utils.py#L186" xlink:actuate="onRequest" xlink:href="https://github.com/trubens71/verde/blob/e3e62bc0e99533f67f17d23f406d6f08fca4a210/src/utils.py#L186" xlink:show="new" xlink:title="https://github.com/trubens71/verde/blob/e3e62bc0e99533f67f17d23f406d6f08fca4a210/src/utils.py#L186" xlink:type="simple"><polygon fill="#A80036" points="1214.5,121.3086,1224.5,125.3086,1214.5,129.3086,1218.5,125.3086" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="54" x2="1220.5" y1="125.3086" y2="125.3086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="61" y="120.5664">configure_logger</text></a><polygon fill="#A80036" points="199,150.6191,209,154.6191,199,158.6191,203,154.6191" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="54" x2="205" y1="154.6191" y2="154.6191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="61" y="149.877">init(dir)</text><polygon fill="#A80036" points="1214.5,179.9297,1224.5,183.9297,1214.5,187.9297,1218.5,183.9297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="221" x2="1220.5" y1="183.9297" y2="183.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="328" x="228" y="179.1875">validate_json_doc(trial_config, trial_config_schema)</text><polygon fill="#A80036" points="276,209.2402,286,213.2402,276,217.2402,280,213.2402" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="221" x2="282" y1="213.2402" y2="213.2402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="228" y="208.498">init</text><polygon fill="#A80036" points="276,268.5508,286,272.5508,276,276.5508,280,272.5508" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="54" x2="282" y1="272.5508" y2="272.5508"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="61" y="267.8086">run</text><polygon fill="#A80036" points="1214.5,297.8613,1224.5,301.8613,1214.5,305.8613,1218.5,301.8613" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="298" x2="1220.5" y1="301.8613" y2="301.8613"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="305" y="297.1191">delete_temp_files</text><polygon fill="#A80036" points="1214.5,327.1719,1224.5,331.1719,1214.5,335.1719,1218.5,331.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="298" x2="1220.5" y1="331.1719" y2="331.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="354" x="305" y="326.4297">validate_json_doc(domain_schema,verde_meta_schema)</text><polygon fill="#A80036" points="1214.5,356.4824,1224.5,360.4824,1214.5,364.4824,1218.5,360.4824" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="298" x2="1220.5" y1="360.4824" y2="360.4824"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="317" x="305" y="355.7402">validate_json_doc(mapping_file,mapping_schema)</text><polygon fill="#A80036" points="1214.5,404.1035,1224.5,408.1035,1214.5,412.1035,1218.5,408.1035" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="298" x2="1220.5" y1="408.1035" y2="408.1035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="231" x="305" y="403.3613">fix_column_headings(input_csv_file)</text><path d="M111,373.4824 L111,428.4824 L283,428.4824 L283,383.4824 L273,373.4824 L111,373.4824 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M273,373.4824 L273,383.4824 L283,383.4824 L273,373.4824 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="117" y="391.0508">clingo does not support</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="117" y="406.3613">special chars, so fix</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="117" y="421.6719">our vis input data</text><polygon fill="#A80036" points="554.5,451.7246,564.5,455.7246,554.5,459.7246,558.5,455.7246" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="298" x2="560.5" y1="455.7246" y2="455.7246"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="305" y="450.9824">get_baseline_schema_query_lp</text><polygon fill="#A80036" points="708,499.3457,718,503.3457,708,507.3457,712,503.3457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="576.5" x2="714" y1="503.3457" y2="503.3457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="583.5" y="498.6035">Chart</text><path d="M735,468.7246 L735,523.7246 L1051,523.7246 L1051,478.7246 L1041,468.7246 L735,468.7246 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1041,468.7246 L1041,478.7246 L1051,478.7246 L1041,468.7246 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="295" x="741" y="486.293">use dziban to create logic program facts which</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="741" y="501.6035">describe the vis input data structues, and the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="244" x="741" y="516.9141">rules to express the query on that data</text><polygon fill="#A80036" points="713,546.9668,723,550.9668,713,554.9668,717,550.9668" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="571.5" x2="719" y1="550.9668" y2="550.9668"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="578.5" y="546.2246">_get_full_query</text><polygon fill="#A80036" points="1214.5,576.2773,1224.5,580.2773,1214.5,584.2773,1218.5,580.2773" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="298" x2="1220.5" y1="580.2773" y2="580.2773"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="305" y="575.5352">write_list_to_file(baseline_schema_query)</text><path d="M236.5,602.2773 L533.5,602.2773 L533.5,609.2773 L523.5,619.2773 L236.5,619.2773 L236.5,602.2773 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="97.2422" style="stroke: #000000; stroke-width: 2.0;" width="1021.5" x="236.5" y="602.2773"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="252" x="251.5" y="615.8457">generate verde domain specific rules</text><polygon fill="#A80036" points="441,647.5537,451,651.5537,441,655.5537,445,651.5537" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="298" x2="447" y1="651.5537" y2="651.5537"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="305" y="646.8115">create_verde_rules_lp</text><path d="M468,624.5879 L468,664.5879 L711,664.5879 L711,634.5879 L701,624.5879 L468,624.5879 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M701,624.5879 L701,634.5879 L711,634.5879 L701,624.5879 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="474" y="642.1563">rule implementations are described</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="474" y="657.4668">in later diagrams</text><polygon fill="#A80036" points="1214.5,687.5195,1224.5,691.5195,1214.5,695.5195,1218.5,691.5195" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="458" x2="1220.5" y1="691.5195" y2="691.5195"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="282" x="465" y="686.7773">write_list_to_file(verde_schema_rules_query)</text><path d="M236.5,713.5195 L502.5,713.5195 L502.5,720.5195 L492.5,730.5195 L236.5,730.5195 L236.5,713.5195 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="539.9004" style="stroke: #000000; stroke-width: 2.0;" width="1021.5" x="236.5" y="713.5195"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="221" x="251.5" y="727.0879">get baseline draco visualisations</text><polygon fill="#A80036" points="778.5,748.1406,788.5,752.1406,778.5,756.1406,782.5,752.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="298" x2="784.5" y1="752.1406" y2="752.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="271" x="305" y="747.3984">get_vis_results(baseline_schema_query_lp)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="800.5" x2="842.5" y1="785.6064" y2="785.6064"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="842.5" x2="842.5" y1="785.6064" y2="798.6064"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="801.5" x2="842.5" y1="798.6064" y2="798.6064"/><polygon fill="#A80036" points="811.5,794.6064,801.5,798.6064,811.5,802.6064,807.5,798.6064" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="807.5" y="780.8643">get_lp_files</text><path d="M892,765.1406 L892,805.1406 L1188,805.1406 L1188,775.1406 L1178,765.1406 L892,765.1406 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1178,765.1406 L1178,775.1406 L1188,775.1406 L1178,765.1406 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275" x="898" y="782.709">draco knowledge base (lp's) of visualisation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="898" y="798.0195">hard and soft rules and their weights</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="800.5" x2="842.5" y1="832.0723" y2="832.0723"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="842.5" x2="842.5" y1="832.0723" y2="845.0723"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="801.5" x2="842.5" y1="845.0723" y2="845.0723"/><polygon fill="#A80036" points="811.5,841.0723,801.5,845.0723,811.5,849.0723,807.5,845.0723" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="807.5" y="827.3301">write_full_lp</text><polygon fill="#A80036" points="1214.5,870.3828,1224.5,874.3828,1214.5,878.3828,1218.5,874.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="800.5" x2="1220.5" y1="874.3828" y2="874.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="807.5" y="869.6406">write_list_to_file(baseline_full_lp)</text><polygon fill="#A80036" points="587.5,899.6934,577.5,903.6934,587.5,907.6934,583.5,903.6934" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="581.5" x2="789.5" y1="903.6934" y2="903.6934"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="593.5" y="898.9512">run_draco</text><polygon fill="#A80036" points="641,939.6592,651,943.6592,641,947.6592,645,943.6592" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="576.5" x2="647" y1="943.6592" y2="943.6592"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="583.5" y="938.917">run</text><path d="M668,916.6934 L668,956.6934 L893,956.6934 L893,926.6934 L883,916.6934 L668,916.6934 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M883,916.6934 L883,926.6934 L893,926.6934 L883,916.6934 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="674" y="934.2617">passes lp to clingo and captures</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="674" y="949.5723">output as python objects</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="800.5" x2="842.5" y1="1017.7803" y2="1017.7803"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="842.5" x2="842.5" y1="1017.7803" y2="1030.7803"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="801.5" x2="842.5" y1="1030.7803" y2="1030.7803"/><polygon fill="#A80036" points="811.5,1026.7803,801.5,1030.7803,811.5,1034.7803,807.5,1030.7803" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="807.5" y="1013.0381">write_results_json</text><path d="M934,997.3145 L934,1037.3145 L1216,1037.3145 L1216,1007.3145 L1206,997.3145 L934,997.3145 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1206,997.3145 L1206,1007.3145 L1216,1007.3145 L1206,997.3145 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="261" x="940" y="1014.8828">contains all ranked models, vis proprties,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="940" y="1030.1934">and soft rule violations</text><polygon fill="#A80036" points="587.5,1093.8672,577.5,1097.8672,587.5,1101.8672,583.5,1097.8672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="581.5" x2="789.5" y1="1097.8672" y2="1097.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="593.5" y="1093.125">get_vega_lite_spec</text><path d="M318,1047.9355 L318,1133.9355 L561,1133.9355 L561,1057.9355 L551,1047.9355 L318,1047.9355 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M551,1047.9355 L551,1057.9355 L561,1057.9355 L551,1047.9355 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="324" y="1065.5039">use draco to turn vis properties</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="324" y="1080.8145">into a valid vega-lite specs,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="324" y="1096.125">however we have to take care of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="324" y="1111.4355">new properties introduced by verde</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="328" y="1126.7461">(sort, colours and schemes)</text><polygon fill="#A80036" points="641,1156.7988,651,1160.7988,641,1164.7988,645,1160.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="576.5" x2="647" y1="1160.7988" y2="1160.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="583.5" y="1156.0566">as_vl</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="663" x2="705" y1="1195.1094" y2="1195.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="705" x2="705" y1="1195.1094" y2="1208.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="658" x2="705" y1="1208.1094" y2="1208.1094"/><polygon fill="#A80036" points="668,1204.1094,658,1208.1094,668,1212.1094,664,1208.1094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="670" y="1190.3672">asp2vl</text><path d="M723,1177.2988 L723,1202.2988 L805,1202.2988 L805,1187.2988 L795,1177.2988 L723,1177.2988 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M795,1177.2988 L795,1187.2988 L805,1187.2988 L795,1177.2988 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="729" y="1194.8672">javascript</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="800.5" x2="842.5" y1="1237.4199" y2="1237.4199"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="842.5" x2="842.5" y1="1237.4199" y2="1250.4199"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="795.5" x2="842.5" y1="1250.4199" y2="1250.4199"/><polygon fill="#A80036" points="805.5,1246.4199,795.5,1250.4199,805.5,1254.4199,801.5,1250.4199" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="807.5" y="1232.6777">write_results_vegalite</text><path d="M236.5,1267.4199 L689.5,1267.4199 L689.5,1274.4199 L679.5,1284.4199 L236.5,1284.4199 L236.5,1267.4199 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="419.0371" style="stroke: #000000; stroke-width: 2.0;" width="1021.5" x="236.5" y="1267.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="408" x="251.5" y="1280.9883">get verde enhanced visualisations (similar pattern to above)</text><polygon fill="#A80036" points="778.5,1305.041,788.5,1309.041,778.5,1313.041,782.5,1309.041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="298" x2="784.5" y1="1309.041" y2="1309.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="291" x="305" y="1304.2988">get_vis_results(verde_schema_rules_query_lp)</text><path d="M805,1289.7305 L805,1314.7305 L1060,1314.7305 L1060,1299.7305 L1050,1289.7305 L805,1289.7305 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1050,1289.7305 L1050,1299.7305 L1060,1299.7305 L1050,1289.7305 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="811" y="1307.2988">now with verde domain specific rules</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="800.5" x2="842.5" y1="1345.5068" y2="1345.5068"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="842.5" x2="842.5" y1="1345.5068" y2="1358.5068"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="801.5" x2="842.5" y1="1358.5068" y2="1358.5068"/><polygon fill="#A80036" points="811.5,1354.5068,801.5,1358.5068,811.5,1362.5068,807.5,1358.5068" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="807.5" y="1340.7646">get_overridden_lp_files</text><path d="M966,1325.041 L966,1365.041 L1153,1365.041 L1153,1335.041 L1143,1325.041 L966,1325.041 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1143,1325.041 L1143,1335.041 L1153,1335.041 L1143,1325.041 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="972" y="1342.6094">verde overrides some</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="972" y="1357.9199">draco baseline constraints</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="800.5" x2="842.5" y1="1391.9727" y2="1391.9727"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="842.5" x2="842.5" y1="1391.9727" y2="1404.9727"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="801.5" x2="842.5" y1="1404.9727" y2="1404.9727"/><polygon fill="#A80036" points="811.5,1400.9727,801.5,1404.9727,811.5,1408.9727,807.5,1404.9727" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="807.5" y="1387.2305">write_full_lp</text><polygon fill="#A80036" points="1214.5,1430.2832,1224.5,1434.2832,1214.5,1438.2832,1218.5,1434.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="800.5" x2="1220.5" y1="1434.2832" y2="1434.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="807.5" y="1429.541">write_list_to_file(verde_full_lp)</text><polygon fill="#A80036" points="587.5,1459.5938,577.5,1463.5938,587.5,1467.5938,583.5,1463.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="581.5" x2="789.5" y1="1463.5938" y2="1463.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="593.5" y="1458.8516">run_draco</text><polygon fill="#A80036" points="646,1488.9043,656,1492.9043,646,1496.9043,650,1492.9043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="571.5" x2="652" y1="1492.9043" y2="1492.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="578.5" y="1488.1621">run</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="800.5" x2="847.5" y1="1517.2148" y2="1517.2148"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="847.5" x2="847.5" y1="1517.2148" y2="1530.2148"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="806.5" x2="847.5" y1="1530.2148" y2="1530.2148"/><polygon fill="#A80036" points="816.5,1526.2148,806.5,1530.2148,816.5,1534.2148,812.5,1530.2148" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="812.5" y="1512.4727">write_results_json</text><polygon fill="#A80036" points="587.5,1560.5254,577.5,1564.5254,587.5,1568.5254,583.5,1564.5254" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="581.5" x2="789.5" y1="1564.5254" y2="1564.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="593.5" y="1559.7832">get_vega_lite_spec</text><polygon fill="#A80036" points="641,1589.8359,651,1593.8359,641,1597.8359,645,1593.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="576.5" x2="647" y1="1593.8359" y2="1593.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="583.5" y="1589.0938">as_vl</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="663" x2="705" y1="1628.1465" y2="1628.1465"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="705" x2="705" y1="1628.1465" y2="1641.1465"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="658" x2="705" y1="1641.1465" y2="1641.1465"/><polygon fill="#A80036" points="668,1637.1465,658,1641.1465,668,1645.1465,664,1641.1465" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="670" y="1623.4043">asp2vl</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="800.5" x2="842.5" y1="1670.457" y2="1670.457"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="842.5" x2="842.5" y1="1670.457" y2="1683.457"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="795.5" x2="842.5" y1="1683.457" y2="1683.457"/><polygon fill="#A80036" points="805.5,1679.457,795.5,1683.457,805.5,1687.457,801.5,1683.457" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="807.5" y="1665.7148">write_results_vegalite</text><path d="M13,1700.457 L160,1700.457 L160,1707.457 L150,1717.457 L13,1717.457 L13,1700.457 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="231.1738" style="stroke: #000000; stroke-width: 2.0;" width="1245" x="13" y="1700.457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="28" y="1714.0254">analyse results</text><polygon fill="#A80036" points="778.5,1735.0781,788.5,1739.0781,778.5,1743.0781,782.5,1739.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="298" x2="784.5" y1="1739.0781" y2="1739.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="305" y="1734.3359">make_vegalite_concat</text><polygon fill="#A80036" points="1214.5,1767.3887,1224.5,1771.3887,1214.5,1775.3887,1218.5,1771.3887" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="800.5" x2="1220.5" y1="1771.3887" y2="1771.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="331" x="807.5" y="1766.6465">validate_json_doc(vegalite_concat, vegalite_schema)</text><path d="M548,1752.0781 L548,1777.0781 L785,1777.0781 L785,1762.0781 L775,1752.0781 L548,1752.0781 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M775,1752.0781 L775,1762.0781 L785,1762.0781 L775,1752.0781 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="554" y="1769.6465">confirm all visualisations are valid</text><polygon fill="#A80036" points="981.5,1799.6992,991.5,1803.6992,981.5,1807.6992,985.5,1803.6992" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="800.5" x2="987.5" y1="1803.6992" y2="1803.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="807.5" y="1798.957">compare_baseline_to_verde</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1003.5" x2="1045.5" y1="1833.0098" y2="1833.0098"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1045.5" x2="1045.5" y1="1833.0098" y2="1846.0098"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1004.5" x2="1045.5" y1="1846.0098" y2="1846.0098"/><polygon fill="#A80036" points="1014.5,1842.0098,1004.5,1846.0098,1014.5,1850.0098,1010.5,1846.0098" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="1010.5" y="1828.2676">compare_specs</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1003.5" x2="1045.5" y1="1880.3203" y2="1880.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1045.5" x2="1045.5" y1="1880.3203" y2="1893.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="998.5" x2="1045.5" y1="1893.3203" y2="1893.3203"/><polygon fill="#A80036" points="1008.5,1889.3203,998.5,1893.3203,1008.5,1897.3203,1004.5,1893.3203" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="1010.5" y="1875.5781">create_exploratory_visualisation</text><polygon fill="#A80036" points="204,1916.6309,214,1920.6309,204,1924.6309,208,1920.6309" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="49" x2="210" y1="1920.6309" y2="1920.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="56" y="1915.8887">exec_regression_test</text><path d="M226,1901.3203 L226,1926.3203 L533,1926.3203 L533,1911.3203 L523,1901.3203 L226,1901.3203 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M523,1901.3203 L523,1911.3203 L533,1911.3203 L523,1901.3203 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="232" y="1918.8887">compare all output files to previous good run</text><!--MD5=[8fd3c9a150d92f3eb5d0e0c829468d3e]
@startuml
scale 0.5
skinparam shadowing false
skinparam ParticipantBorderColor gray

title Verde trial sequence diagram (click green participant boxes to navigate to code)

participant verde [[https://github.com/trubens71/verde/blob/master/scripts/verde.py]] #Honeydew
participant trial [[https://github.com/trubens71/verde/blob/master/src/trial.py]] #Honeydew
participant experiment [[https://github.com/trubens71/verde/blob/master/src/experiment.py]] #Honeydew
participant domain_rules [[https://github.com/trubens71/verde/blob/master/src/domain_rules.py]] #Honeydew
participant draco_proxy [[https://github.com/trubens71/verde/blob/master/src/draco_proxy.py]] #Honeydew
participant draco [[https://github.com/uwdata/draco]] #GhostWhite
participant dziban [[https://github.com/uwdata/dziban]] #GhostWhite
participant results [[https://github.com/trubens71/verde/blob/master/src/results.py]] #Honeydew
participant compare [[https://github.com/trubens71/verde/blob/master/src/compare.py]] #Honeydew
participant utils [[https://github.com/trubens71/verde/blob/master/src/utils.py]] #Honeydew

group set up
verde->utils [[https://github.com/trubens71/verde/blob/e3e62bc0e99533f67f17d23f406d6f08fca4a210/src/utils.py#L186]] : configure_logger
activate verde
verde->trial: init(dir)
activate trial
trial->utils: validate_json_doc(trial_config, trial_config_schema)
trial->experiment: init
activate experiment
deactivate experiment
verde->experiment: run
activate experiment
experiment->utils: delete_temp_files
experiment->utils: validate_json_doc(domain_schema,verde_meta_schema)
experiment->utils: validate_json_doc(mapping_file,mapping_schema)
experiment->utils: fix_column_headings(input_csv_file)
note left
clingo does not support
special chars, so fix
our vis input data
end note
experiment->draco_proxy: get_baseline_schema_query_lp
activate draco_proxy
draco_proxy->dziban: Chart
note right
use dziban to create logic program facts which
describe the vis input data structues, and the
rules to express the query on that data
endnote
activate dziban
draco_proxy->dziban: _get_full_query
deactivate dziban
deactivate draco_proxy
experiment->utils: write_list_to_file(baseline_schema_query)
end


group generate verde domain specific rules
experiment->domain_rules: create_verde_rules_lp
activate domain_rules
note right
rule implementations are described
in later diagrams
end note
domain_rules->utils: write_list_to_file(verde_schema_rules_query)
deactivate domain_rules
end

activate experiment

group get baseline draco visualisations
experiment->results: get_vis_results(baseline_schema_query_lp)
activate results
results->results: get_lp_files
note right
draco knowledge base (lp's) of visualisation
hard and soft rules and their weights
end note
results->results: write_full_lp
results->utils: write_list_to_file(baseline_full_lp)
results->draco_proxy: run_draco
activate draco_proxy
draco_proxy->draco: run
activate draco
note right
passes lp to clingo and captures
output as python objects
end note
deactivate draco
deactivate draco_proxy
results->results: write_results_json
note right
contains all ranked models, vis proprties,
and soft rule violations
end note
results->draco_proxy: get_vega_lite_spec
note left
use draco to turn vis properties
into a valid vega-lite specs,
however we have to take care of
new properties introduced by verde
 (sort, colours and schemes)
end note
activate draco_proxy
draco_proxy->draco: as_vl
activate draco
draco->draco: asp2vl
note right
javascript
end note
deactivate draco
deactivate draco_proxy
results->results: write_results_vegalite
deactivate results
end


group get verde enhanced visualisations (similar pattern to above)
experiment->results: get_vis_results(verde_schema_rules_query_lp)
activate results
note right: now with verde domain specific rules
results->results: get_overridden_lp_files
note right
verde overrides some
draco baseline constraints
end note
results->results: write_full_lp
results->utils: write_list_to_file(verde_full_lp)
results->draco_proxy: run_draco
activate draco_proxy
activate draco
draco_proxy->draco: run
deactivate draco
deactivate draco_proxy
results->results: write_results_json
activate draco_proxy
results->draco_proxy: get_vega_lite_spec
draco_proxy->draco: as_vl
activate draco
draco->draco: asp2vl
deactivate draco
deactivate draco_proxy
results->results: write_results_vegalite
deactivate results
end

group analyse results
experiment->results: make_vegalite_concat
activate results
results->utils: validate_json_doc(vegalite_concat, vegalite_schema)
note left
confirm all visualisations are valid
end note
results->compare: compare_baseline_to_verde
activate compare
compare->compare: compare_specs
compare->compare: create_exploratory_visualisation
deactivate compare
deactivate results
deactivate experiment
verde->trial: exec_regression_test
deactivate trial
note right: compare all output files to previous good run
deactivate verde
end

@enduml

PlantUML version 1.2020.09(Sun May 10 11:51:06 BST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10-b765.53
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>
