{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Domain Model for Adult Social Care in England",
  "description": "A standard model by which we can express data visualisation rules. Not intended for document validation",
  "$comment": "Version 1: A trivial first version for sprint 1 proof of concept",
  "definitions": {
    "service": {
      "type": "object",
      "properties": {
        "service_type": {
          "type": "boolean",
          "domain_meta": {
            "ordinal": ["ST-Max", "Long Term", "Unpaid Carer Support"]
          }
        },
        "setting": {
          "type": "boolean",
          "domain_meta": {
            "ordinal": ["community", "home", "residential home", "nursing home"]
          }
        }
      },
      "additionalProperties": false
    },
    "demographics": {
      "type": "object",
      "properties": {
        "age": { "type": "boolean" },
        "gender": {
          "type": "boolean",
          "domain_meta": { "ordinal": ["female", "male", "non-binary"] }
        },
        "ethnicity": { "type": "boolean" }
      },
      "additionalProperties": false
    },
    "org_unit": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "local_authority_name": { "type": "boolean" },
            "local_authority_code": { "type": "boolean" },
            "geography_code": { "type": "boolean" },
            "region_name": { "type": "boolean" },
            "region_code": { "type": "boolean" }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "central_gov_org_unit": { "type": "boolean" }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "nhs_org_unit": { "type": "boolean" }
          },
          "additionalProperties": false
        }
      ]
    }
  },
  "type": "object",
  "properties": {
    "funder": {
      "type": "object",
      "domain_meta": { "phase": "supply" },
      "properties": {
        "org_unit": { "$ref": "#/definitions/org_unit" },
        "budget": { "type": "boolean", "domain_meta": { "phase": "supply" } },
        "expenditure": {
          "type": "boolean",
          "domain_meta": { "phase": "supply" }
        },
        "income": { "type": "boolean", "domain_meta": { "phase": "supply" } },
        "service_provision": { "$ref": "#/properties/service_provision" }
      },
      "additionalProperties": false
    },
    "service_provision": {
      "type": "object",
      "properties": {
        "service": { "$ref": "#/definitions/service" },
        "user": { "$ref": "#/properties/user" },
        "unpaid_carer": { "$ref": "#/properties/unpaid_carer" },
        "num_requests": {
          "type": "boolean",
          "domain_meta": { "phase": "demand" }
        },
        "num_provisions": {
          "type": "boolean",
          "domain_meta": { "phase": "operate" }
        },
        "num_new_clients": {
          "type": "boolean",
          "domain_meta": { "phase": "operate" }
        }
      },
      "additionalProperties": false
    },
    "user": {
      "type": "object",
      "properties": {
        "demographics": {
          "$ref": "#/definitions/demographics",
          "domain_meta": { "phase": "demand" }
        },
        "quality_of_life": {
          "type": "object",
          "domain_meta": { "phase": "outcome" },
          "properties": {
            "well-being": {
              "type": "boolean",
              "domain_meta": { "phase": "outcome" }
            },
            "independence-mobility": {
              "type": "boolean",
              "domain_meta": { "phase": "outcome" }
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "unpaid_carer": {
      "type": "object",
      "properties": {
        "demographics": {
          "$ref": "#/definitions/demographics",
          "domain_meta": { "phase": "supply" }
        },
        "quality_of_life": {
          "type": "object",
          "domain_meta": { "phase": "outcome" },
          "properties": {
            "well-being": {
              "type": "boolean",
              "domain_meta": { "phase": "outcome" }
            },
            "employment-income": {
              "type": "boolean",
              "domain_meta": { "phase": "outcome" }
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
